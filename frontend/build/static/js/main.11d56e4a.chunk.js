(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(e,t,n){},57:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(32),a=n.n(c),o=(n(38),n(10)),i=n(11),u=n(13),j=n(12),h=n(9),l=n.n(h),d=(n.p,n(57),n(7)),p=n(0),b=function(e){var t=e.user;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.username}),Object(p.jsx)("td",{children:t.first_name}),Object(p.jsx)("td",{children:t.last_name}),Object(p.jsx)("td",{children:Object(p.jsx)(d.b,{to:"user/".concat(t.id),children:t.email})})]})},O=function(e){var t=e.users;return Object(p.jsxs)("table",{children:[Object(p.jsx)("th",{children:"Username"}),Object(p.jsx)("th",{children:"Firstname"}),Object(p.jsx)("th",{children:"Lastname"}),Object(p.jsx)("th",{children:"Email"}),t.map((function(e){return Object(p.jsx)(b,{user:e})}))]})},f=function(e){var t=e.project,n=e.users,r=e.deleteProject;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.id}),Object(p.jsx)("td",{children:t.name}),Object(p.jsx)("td",{children:t.users.map((function(e){var t=n.find((function(t){return t.id==e}));if(t)return t.email+" "}))}),Object(p.jsx)("td",{children:t.link_rep}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return r(t.id)},type:"button",children:"Delete"})})]})},x=function(e){var t=e.project,n=e.users,r=e.deleteProject;return Object(p.jsxs)("table",{children:[Object(p.jsx)("th",{children:"Id"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Users"}),Object(p.jsx)("th",{children:"Link of rep"}),t.map((function(e){return Object(p.jsx)(f,{project:e,users:n,deleteProject:r})}))]})},g=n(2),m=function(e){var t=e.project,n=e.users;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.id}),Object(p.jsx)("td",{children:t.name}),Object(p.jsx)("td",{children:t.users.map((function(e){var t=n.find((function(t){return t.id==e}));if(t)return t.email+" "}))}),Object(p.jsx)("td",{children:t.link_rep})]})},v=function(e){var t=e.project,n=e.users,r=Object(g.g)().id,s=t.filter((function(e){return e.users.includes(parseInt(r))}));return Object(p.jsxs)("table",{children:[Object(p.jsx)("th",{children:"Id"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Users"}),Object(p.jsx)("th",{children:"LinkOfRep"}),s.map((function(e){return Object(p.jsx)(m,{project:e,users:n})}))]})},k=function(e){var t=e.todo,n=e.deleteTodo;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.id}),Object(p.jsx)("td",{children:t.project}),Object(p.jsx)("td",{children:t.user}),Object(p.jsx)("td",{children:t.text}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},y=function(e){var t=e.todo,n=e.deleteTodo;return Object(p.jsxs)("table",{children:[Object(p.jsx)("th",{children:"Id"}),Object(p.jsx)("th",{children:"Project"}),Object(p.jsx)("th",{children:"User"}),Object(p.jsx)("th",{children:"Text"}),t.map((function(e){return Object(p.jsx)(k,{todo:e,deleteTodo:n})}))]})},C=function(e){e.menu;return Object(p.jsxs)("table",{children:[Object(p.jsx)("th",{children:Object(p.jsx)(d.b,{to:"/",children:"Users"})}),Object(p.jsx)("th",{children:Object(p.jsx)(d.b,{to:"/projects",children:"Projects"})}),Object(p.jsx)("th",{children:Object(p.jsx)(d.b,{to:"/projects/create",children:"Create project"})}),Object(p.jsx)("th",{children:Object(p.jsx)(d.b,{to:"/todo",children:"Todo"})}),Object(p.jsx)("th",{children:Object(p.jsx)(d.b,{to:"/todo/create",children:"Create todo"})})]})},_=function(e){e.footer;return"Copyright \xa9 TheSand. All rights reserved"},S=n(15),P=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={login:"",password:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(s.a.Component),T=n(17),w=n.n(T),U=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={name:"",users:[],link_rep:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.users,this.state.link_rep),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsx)("input",{type:"text",name:"name",placeholder:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("select",{multiple:!0,name:"users",onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.username})}))}),Object(p.jsx)("input",{type:"text",name:"link_rep",placeholder:"link_rep",value:this.state.link_rep,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(s.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={text:"",project:"",user:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({project:t})}else this.setState({project:[]})}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.text,this.state.project,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsx)("input",{type:"text",name:"text",placeholder:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("select",{name:"project",onChange:function(t){return e.handleProjectChange(t)},children:this.props.project.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name})}))}),Object(p.jsx)("select",{name:"user",onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.username})}))}),Object(p.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(s.a.Component),D=function(e){var t=e.location;return Object(p.jsxs)("div",{children:["Page ",t.pathname," not found."]})},I=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={users:[],project:[],todo:[],token:""},r}return Object(i.a)(n,[{key:"is_auth",value:function(){return!!this.state.token}},{key:"get_token_from_storage",value:function(){var e=new w.a;this.setState({token:e.get("token")},this.get_data)}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"},t=new w.a;return e.Authorization="Token "+t.get("token"),e}},{key:"get_data",value:function(){var e=this,t=this.get_headers();l.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then((function(t){t.data;e.setState({users:t.data.results})})).catch((function(t){e.setState({users:[]}),console.log(t)})),l.a.get("http://127.0.0.1:8000/api/project/",{headers:t}).then((function(t){t.data;e.setState({project:t.data.results})})).catch((function(t){e.setState({project:[]}),console.log(t)})),l.a.get("http://127.0.0.1:8000/api/todo/",{headers:t}).then((function(t){t.data;for(var n=[],r=0;r<t.data.results.length;r++)1==t.data.results[r].is_active&&n.push(t.data.results[r]);e.setState({todo:n})})).catch((function(t){e.setState({todo:[]}),console.log(t)}))}},{key:"get_token",value:function(e,t){var n=this;l.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(e){(new w.a).set("token",e.data.token),n.setState({token:e.data.token},n.get_data)})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){(new w.a).set("token",""),this.setState({token:""},this.get_data)}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();l.a.delete("http://127.0.0.1:8000/api/project/".concat(e,"/"),{headers:n}).then((function(e){t.get_data()})).catch((function(e){return console.log(e)}))}},{key:"createProject",value:function(e,t,n){var r=this;if(e&&0!=t.length){var s=this.get_headers();l.a.post("http://127.0.0.1:8000/api/project/",{name:e,users:t,link_rep:n},{headers:s}).then((function(e){r.get_data()})).catch((function(e){return console.log(e)}))}else console.log("Empty params:",e,t)}},{key:"deleteTodo",value:function(e){var t=this,n=this.get_headers();l.a.delete("http://127.0.0.1:8000/api/todo/".concat(e,"/"),{headers:n}).then((function(e){t.get_data()})).catch((function(e){return console.log(e)}))}},{key:"createTodo",value:function(e,t,n){var r=this,s=this.get_headers();l.a.post("http://127.0.0.1:8000/api/todo/",{text:e,project:t,user:n},{headers:s}).then((function(e){r.get_data()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"App-header",children:[Object(p.jsx)("div",{children:Object(p.jsxs)(d.a,{children:[this.is_auth()?Object(p.jsx)("button",{onClick:function(){return e.logout()},children:"Logout"}):Object(p.jsx)(d.b,{to:"/login",children:"Login"}),Object(p.jsx)(C,{menu:this.menu}),Object(p.jsxs)(g.d,{children:[Object(p.jsx)(g.b,{exact:!0,path:"/",component:function(){return Object(p.jsx)(O,{users:e.state.users})}}),Object(p.jsx)(g.b,{exact:!0,path:"/projects",component:function(){return Object(p.jsx)(x,{project:e.state.project,users:e.state.users,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/todo",component:function(){return Object(p.jsx)(y,{todo:e.state.todo,deleteTodo:function(t){return e.deleteTodo(t)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/login",component:function(){return Object(p.jsx)(P,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/projects/create",component:function(){return Object(p.jsx)(U,{users:e.state.users,createProject:function(t,n,r){return e.createProject(t,n,r)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/todo/create",component:function(){return Object(p.jsx)(L,{users:e.state.users,project:e.state.project,createTodo:function(t,n,r){return e.createTodo(t,n,r)}})}}),Object(p.jsx)(g.b,{path:"/user/:id",children:Object(p.jsx)(v,{project:this.state.project,users:this.state.users})}),Object(p.jsx)(g.a,{from:"/users",to:"/"}),Object(p.jsx)(g.b,{component:D})]})]})}),Object(p.jsx)("div",{className:"footer",children:Object(p.jsx)(_,{footer:this.footer})})]})}}]),n}(s.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(I,{})}),document.getElementById("root")),F()}},[[66,1,2]]]);
//# sourceMappingURL=main.11d56e4a.chunk.js.map